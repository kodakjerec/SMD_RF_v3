{"version":3,"sources":["../../src/pages/_24_PhotoGallery/PhotoGallery.module.ts","../../src/pages/_24_PhotoGallery/PhotoGallery.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { _24_PhotoGallery } from './PhotoGallery';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicPageModule.forChild(_24_PhotoGallery)\r\n  ],\r\n  declarations: [_24_PhotoGallery],\r\n  entryComponents: [_24_PhotoGallery]\r\n})\r\nexport class AppModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/_24_PhotoGallery/PhotoGallery.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { NavController, Platform, NavParams, AlertController, IonicPage } from 'ionic-angular';\r\nimport { http_services } from '../_ZZ_CommonLib/http_services';\r\n\r\n@IonicPage({\r\n    name: '_24_PhotoGallery',\r\n    segment: '_24_PhotoGallery'\r\n})\r\n@Component({\r\n    templateUrl: 'PhotoGallery.html'\r\n})\r\n\r\nexport class _24_PhotoGallery {\r\n    constructor(public navCtrl: NavController\r\n        , private plt: Platform\r\n        , public navParams: NavParams\r\n        , public _http_services: http_services\r\n        , private alertCtrl: AlertController) {\r\n\r\n        this.data.devWidth = plt.width();\r\n        console.log('Dev Width' + this.data.devWidth);\r\n    }\r\n\r\n    //#region Init\r\n    data = {\r\n        choice: 'DAS'\r\n        , ScanBarcode: ''\r\n        , JOBID: ''\r\n        , devWidth: 0\r\n    };\r\n\r\n    Lists = [];\r\n\r\n\r\n    @ViewChild('scan_Entry') scan_Entry;\r\n    //#endregion\r\n\r\n    ngOnInit() {\r\n        this.searchPic();\r\n    };\r\n\r\n    searchPic() {\r\n        this.Lists = [];\r\n        this._http_services.POST('', 'Picture'\r\n            , 'search'\r\n            , [{}])\r\n            .subscribe((response) => {\r\n                for (var index in response) {\r\n                    var value = response[index];\r\n                    var value_Description = value.Description;\r\n                    this.Lists.push({\r\n                        FileName: value.FileName\r\n                        , Description: value_Description\r\n                        , showDescription: value_Description.replace(/\\<br>/g, \"\\n\")\r\n                        , ThumbnailImage: 'data:image/png;base64,' + value.ThumbnailImage\r\n                        , CreateTime: value.CreateTime\r\n                        , check: false\r\n                    });\r\n                }\r\n                console.log(this.Lists);\r\n            });\r\n    }\r\n\r\n    //開啟編輯模式\r\n    showPic(item) {\r\n        item.check = !item.check;\r\n        //this._http_services.POST('', 'Picture'\r\n        //    , 'open'\r\n        //    , [{ Name: '@FileName', Value: item.FileName }])\r\n        //    .subscribe((response) => {\r\n        //        console.log(response);\r\n        //    });\r\n    }\r\n\r\n    //刪除圖片\r\n    deletePic() {\r\n        let strPicsList_show: string = '',\r\n            strPicsList: Array<string> = [];\r\n\r\n        this.Lists.forEach(value => {\r\n            if (value.check) {\r\n                strPicsList_show += value.FileName + '<br>';\r\n                strPicsList.push(value.FileName);\r\n            }\r\n        });\r\n\r\n        let confirm = this.alertCtrl.create({\r\n            title: '確定要永久刪除勾選的圖片？',\r\n            message: strPicsList_show,\r\n            buttons: [\r\n                {\r\n                    text: '取消',\r\n                    handler: () => {\r\n\r\n                    }\r\n                },\r\n                {\r\n                    text: '確定',\r\n                    handler: () => {\r\n                        this._http_services.POST('', 'Picture'\r\n                            , 'delete'\r\n                            , [{ Name: '@FileName', Value: strPicsList }])\r\n                            .subscribe(() => {\r\n                                this.searchPic();\r\n                            });\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        confirm.present();\r\n    }\r\n\r\n    //下載圖片\r\n    downloadPic(item) {\r\n        this._http_services.POST('', 'Picture'\r\n            , 'download'\r\n            , [{ Name: '@FileName', Value: item.FileName }])\r\n            .subscribe(() => {\r\n\r\n            });\r\n    }\r\n\r\n    //改變螢幕寬度時觸發\r\n    onResize() {\r\n        this.data.devWidth = this.plt.width();\r\n    };\r\n\r\n    //help\r\n    help() {\r\n        let alert = this.alertCtrl.create({\r\n            title: '使用說明',\r\n            subTitle: '1. 手機介面瀏覽時，下載功能無法使用<br>'\r\n            + '2. 按下\"下載圖案\"：瀏覽器會跳出下載視窗<br>'\r\n            + '3. 按下\"圖片\"：勾選該張圖片，勾選的圖片右上角會有V圖案<br>'\r\n            + '4. 批次刪除：勾選多張圖片後，按下標題列右方的垃圾桶',\r\n            buttons: ['關閉']\r\n        });\r\n        alert.present();\r\n    }\r\n\r\n    //喪失focus\r\n    myfocus() {\r\n        this.scan_Entry.setFocus();\r\n    };\r\n\r\n    //全選\r\n    selectAll($event) {\r\n        $event._native.nativeElement.select();\r\n    }\r\n\r\n    //手勢\r\n    swipeEvent(event) {\r\n        switch (event.direction) {\r\n            case 1: //NONE\r\n                break;\r\n            case 2: //LEFT\r\n\r\n                break;\r\n            case 4: //RIGHT\r\n                this.navCtrl.pop();\r\n                break;\r\n            case 8: //UP\r\n                break;\r\n            case 16://DOWN\r\n                break;\r\n        };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/_24_PhotoGallery/PhotoGallery.ts"],"sourceRoot":""}