{"version":3,"sources":["../../src/pages/_13_WAS/31_StoreChgAmount/StoreChgAmount.module.ts","../../src/pages/_13_WAS/31_StoreChgAmount/StoreChgAmount.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { _1331_WAS_StoreChgAmount } from './StoreChgAmount';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        _1331_WAS_StoreChgAmount\r\n    ],\r\n    imports: [\r\n        IonicPageModule.forChild(_1331_WAS_StoreChgAmount)\r\n    ],\r\n    entryComponents: [\r\n        _1331_WAS_StoreChgAmount\r\n    ]\r\n})\r\nexport class StoreChgAmountModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/_13_WAS/31_StoreChgAmount/StoreChgAmount.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { NavController, AlertController, IonicPage } from 'ionic-angular';\r\n\r\n//Cordova\r\nimport { Vibration } from '@ionic-native/vibration';\r\n\r\n//My Pages\r\nimport { http_services } from '../../_ZZ_CommonLib/http_services';\r\n\r\n@IonicPage({\r\n    name: '_1331_WAS_StoreChgAmount'\r\n})\r\n@Component({\r\n    templateUrl: 'StoreChgAmount.html'\r\n})\r\nexport class _1331_WAS_StoreChgAmount {\r\n    constructor(public navCtrl: NavController\r\n        , public _http_services: http_services\r\n        , private alertCtrl: AlertController\r\n        , private vibration: Vibration) {\r\n\r\n        this.data.RefValue = localStorage.getItem('WAS_OrderNo')\r\n            + ',' + JSON.parse(localStorage.getItem('WAS_Item')).ITEM_NO;\r\n    }\r\n    @ViewChild('scan_Entry') scan_Entry;\r\n\r\n    ionViewWillEnter() {\r\n        this.BringDisplayList(0);\r\n    }\r\n\r\n    data = {\r\n        RefValue: ''\r\n        , InfiniteScrollEnable: true    //啟用無限卷軸\r\n    };\r\n\r\n    TotalList = [];\r\n    DefaultTestServer = '172_31_31_250';\r\n\r\n    BringDisplayList(startSEQ) {\r\n        let sql_StepValue = '21';\r\n        let sql_parameter = this.data.RefValue + ',' + startSEQ.toString();\r\n\r\n        return this._http_services.POST(this.DefaultTestServer, 'sp'\r\n            , '[WAS].dbo.spactWAS_Line_v2'\r\n            , [{ Name: '@Step', Value: sql_StepValue }\r\n                , { Name: '@Parameters', Value: sql_parameter }])\r\n            .then((response) => {\r\n                if (response != undefined) {\r\n                    this.BringDisplayList_Add(response);\r\n\r\n                    //檢查特殊情況\r\n                    if (response.length == 0) {\r\n                        this.data.InfiniteScrollEnable = false;\r\n                    }\r\n                    else {\r\n                        this.data.InfiniteScrollEnable = true;\r\n                    }\r\n                }\r\n\r\n                return response;\r\n            })\r\n            ;\r\n    }\r\n    //查詢結果匯入TotalList\r\n    BringDisplayList_Add(response) {\r\n        response.forEach((value, index, array) => {\r\n            this.TotalList.push(value);\r\n        });\r\n    }\r\n\r\n    //改量\r\n    readyChangeAMOUNT(item) {\r\n        this.vibration.vibrate(100);\r\n        let alert = this.alertCtrl.create({\r\n            title: '修改訂購量',\r\n            message: '營業所：' + item.SITE_NAME + '<br/>'\r\n            + '代號&nbsp&nbsp&nbsp&nbsp：' + item.SITE_ID + '<br/>'\r\n            + '訂購量：' + item.AMOUNT + '<br/>',\r\n            inputs: [\r\n                {\r\n                    name: 'UPD_AMOUNT',\r\n                    type: 'number',\r\n                    value: item.UPD_AMOUNT,\r\n                    placeholder: ''\r\n                }\r\n            ],\r\n            buttons: [\r\n                {\r\n                    text: '取消',\r\n                    role: 'cancel'\r\n                },\r\n                {\r\n                    text: '確定',\r\n                    handler: data => {\r\n                        //送出sql\r\n                        let sql_StepValue = '22';\r\n                        let sql_parameter = this.data.RefValue + ',' + item.SITE_ID + ',' + data.UPD_AMOUNT + ',' + localStorage.getItem('USER_ID');\r\n\r\n                        this._http_services.POST(this.DefaultTestServer, 'sp'\r\n                            , '[WAS].dbo.spactWAS_Line_v2'\r\n                            , [{ Name: '@Step', Value: sql_StepValue }\r\n                                , { Name: '@Parameters', Value: sql_parameter }])\r\n                            .then((response) => {\r\n                                if (response != undefined) {\r\n                                    item.UPD_AMOUNT = data.UPD_AMOUNT;\r\n                                }\r\n                            });\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        alert.present();\r\n    }\r\n\r\n    //無限卷軸\r\n    doInfinite(infiniteScroll) {\r\n        if (!this.data.InfiniteScrollEnable) {\r\n            infiniteScroll.complete();\r\n            return;\r\n        }\r\n\r\n        let obj = this.TotalList[this.TotalList.length - 1];\r\n\r\n        this.BringDisplayList(obj.SEQ + 1)\r\n            .then(response => {\r\n                console.log('InfiniteScroll Complete');\r\n                infiniteScroll.complete();\r\n            });\r\n    }\r\n\r\n    //全選\r\n    selectAll($event) {\r\n        $event._native.nativeElement.select();\r\n    }\r\n\r\n    //手勢\r\n    swipeEvent(event) {\r\n        switch (event.direction) {\r\n            case 1: //NONE\r\n                break;\r\n            case 2: //LEFT\r\n\r\n                break;\r\n            case 4: //RIGHT\r\n                this.navCtrl.pop();\r\n                break;\r\n            case 8: //UP\r\n                break;\r\n            case 16://DOWN\r\n                break;\r\n        };\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/_13_WAS/31_StoreChgAmount/StoreChgAmount.ts"],"sourceRoot":""}