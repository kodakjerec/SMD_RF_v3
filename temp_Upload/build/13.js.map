{"version":3,"sources":["../../src/pages/_12_ItemRcv/1_CarNo/CarNo.module.ts","../../src/pages/_12_ItemRcv/1_CarNo/CarNo.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { _121_CarNo } from './CarNo';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        IonicPageModule.forChild(_121_CarNo)\r\n    ],\r\n    declarations: [_121_CarNo],\r\n    entryComponents: [_121_CarNo]\r\n})\r\nexport class AppModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/_12_ItemRcv/1_CarNo/CarNo.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { NavController, ToastController, ModalController, IonicPage } from 'ionic-angular';\r\n\r\n//Cordova\r\nimport { Vibration } from '@ionic-native/vibration';\r\n\r\n//My Pages\r\nimport * as myGlobals from '../../../app/Settings';\r\nimport { http_services } from '../../_ZZ_CommonLib/http_services';\r\nimport { PaperDetailPage } from '../../_ZZ_CommonLib/PaperDetail/PaperDetail';\r\n\r\n@IonicPage({\r\n    name: '_121_CarNo',\r\n    segment: '_121_CarNo'\r\n})\r\n@Component({\r\n    templateUrl: 'CarNo.html'\r\n})\r\n\r\nexport class _121_CarNo {\r\n    constructor(public navCtrl: NavController\r\n        , public _http_services: http_services\r\n        , private modalCtrl: ModalController\r\n        , private toastCtrl: ToastController\r\n        , private vibration: Vibration) {\r\n        myGlobals.loginCheck();\r\n    }\r\n\r\n    @ViewChild('scan_Entry') scan_Entry;\r\n\r\n    ionViewDidEnter() {\r\n        if (this.data.IsDisabled == true) {\r\n            this.myFocus();\r\n        }\r\n    }\r\n\r\n    data = {\r\n        CarNo: ''\r\n        , viewColor: ''\r\n        , IsDisabled: true\r\n        , USER_ID: localStorage.getItem('USER_ID')\r\n        , BLOCK_NAME: localStorage.getItem('BLOCK_NAME')\r\n        , IsHideWhenKeyboardOpen: false\r\n    };  // IsDisabled控制\"btn報到\"是否顯示，預設不顯示：IsDisabled = true\r\n    color = { green: '#79FF79', red: '#FF5151' }; // 控制已報到/未報到 顏色\r\n    result = {};\r\n\r\n    //重置btn\r\n    reset() {\r\n        localStorage.setItem('CarNo', '');\r\n\r\n        this.result = {};\r\n\r\n        this.data.viewColor = '';\r\n        this.data.IsDisabled = true;\r\n\r\n        this.myFocus();\r\n    };\r\n    //查詢欄位專用清除\r\n    reset_btn() {\r\n        this.reset();\r\n        this.data.CarNo = '';\r\n    }\r\n\r\n    //#region 查詢報到牌btn\r\n    search() {\r\n        this.vibration.vibrate(100);\r\n        if (this.data.CarNo == '') {\r\n            this.toastCtrl.create({\r\n                message: '請輸入數值',\r\n                duration: myGlobals.Set_timeout,\r\n                position: 'middle'\r\n            }).present();\r\n            return;\r\n        }\r\n\r\n        this.reset();\r\n\r\n        this._http_services.POST('', 'sp'\r\n            , 'spactDCS_ID_HEADER'\r\n            , [\r\n                { Name: '@JOB_ID', Value: '1' }\r\n                , { Name: '@REG_ID', Value: this.data.CarNo }\r\n            ])\r\n            .then((response) => {\r\n\r\n                if (response != undefined) {\r\n                    switch (response[0].RT_CODE) {\r\n                        case 0:\r\n                            //Correct\r\n                            this.result = response[0];\r\n\r\n                            this.data.CarNo = response[0].REG_ID;\r\n                            this.data.IsDisabled = false;\r\n\r\n                            localStorage.setItem('CarNo', this.data.CarNo);\r\n\r\n                            if (response[0].ROW10 == '未報到') {\r\n                                this.data.viewColor = 'red';\r\n                                this.data.IsDisabled = true;\r\n                            } else {\r\n                                this.data.viewColor = 'green';\r\n                                this.data.IsDisabled = false;\r\n                            }\r\n                            break;\r\n                        default:\r\n                            this.toastCtrl.create({\r\n                                message: response[0].RT_MSG,\r\n                                duration: myGlobals.Set_timeout,\r\n                                position: 'middle'\r\n                            }).present();\r\n                            break;\r\n                    }\r\n                }\r\n                this.myFocus();\r\n            });\r\n    };//#endregion\r\n\r\n    //喪失focus\r\n    myFocus() {\r\n        setTimeout(() => {\r\n            this.scan_Entry.setFocus();\r\n        }, 300);\r\n    };\r\n\r\n    //全選\r\n    selectAll($event) {\r\n        $event._native.nativeElement.select();\r\n    }\r\n\r\n    //查詢明細\r\n    //呼叫進貨單明細\r\n    callPaperDetail() {\r\n        console.log(this.data);\r\n        if (this.data.IsDisabled == true)\r\n            return;\r\n\r\n        this._http_services.POST('', 'sp'\r\n            , 'spactDCS_ID_HEADER'\r\n            , [{ Name: '@JOB_ID', Value: 11 }\r\n                , { Name: '@REG_ID', Value: this.data.CarNo }])\r\n            .then((response) => {\r\n                myGlobals.ProgParameters.set('ListTable_Source', response);\r\n\r\n                let obj = this.modalCtrl.create(PaperDetailPage);\r\n                obj.present();\r\n            });\r\n    };\r\n\r\n    //下一步\r\n    Next() {\r\n        if (this.data.IsDisabled == true)\r\n            return;\r\n\r\n        this.navCtrl.push('_122_PaperNo');\r\n    };\r\n\r\n    myKeylogger(event) {\r\n        let obj = myGlobals.keyCodeToValue(event.keyCode, this.data.CarNo);\r\n        if (obj.indexOf('ENTER') >= 0) {\r\n            this.search();\r\n        }\r\n    }\r\n\r\n    //手勢\r\n    swipeEvent(event) {\r\n        switch (event.direction) {\r\n            case 1: //NONE\r\n                break;\r\n            case 2: //LEFT\r\n                this.Next();\r\n                break;\r\n            case 4: //RIGHT\r\n                this.reset();\r\n                this.navCtrl.pop();\r\n                break;\r\n            //case 8: //UP\r\n            //    break;\r\n            //case 16://DOWN\r\n            //    break;\r\n        };\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/_12_ItemRcv/1_CarNo/CarNo.ts"],"sourceRoot":""}